class ImageUtil{

  

  final ImagePicker _imagePicker; 

  Future<Diretory> _directory;  

  Directory? _appDirectory; 

  String? _savePath; 

  Xfile? _selectedImage; 

  bool _isImage = false;


  ImageUtil():_imagePicker = ImagePicker(){
    _directory =getApplicationDocumentsDirectory();
  }   
  
    Future<void> init()async{
        if(_appDirectory ==null){
           _appDirectory = await _directory;
          _savePath = "${_appDirectory.path}";
        }  
  }

  // 사진 갤러리에서 불러오기
  Future pickImageFromGallery() async{
    _selectedImage = await _imagePicker.pickImage(ImageSource.galley);
  }


  // 이미지를 앱에 저장 #id/0/jpg
  Future<void> imageSave(String folder)async{ 
     await _selectedImage.saveTo("${_savePath}/$folder/0.jpg");
  }  

  // 앱에 저장된 이미지를 불러오기  #id/0/jpg
  Future<File> imageLoad(String folder)async{
    if(Directory(_savePath).exists() ==false){
      await Directory(_savePath).create(recursive: true);
    }
    _isImage = await File("${_savePath}/$folder/0.jpg").exists();  
    return File("${_savePath}/$folder/0.jpg");
  }  

  //저장된 이미지 삭제
  void imageDelete(String folder) async {
    await File("${_savePath}/$folder/0.jpg").delete();
    _isImage = false;
  }  

}

